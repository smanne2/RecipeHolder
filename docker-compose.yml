services:
  recipe-holder:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: recipe-holder
    ports:
      - "8000:8000"
    volumes:
      # Named volume for persistent data storage (managed by Docker)
      - recipe-data:/data
      # Optional: bind mount for custom logo (uncomment if needed)
      # - ./static:/app/static
    environment:
      - DATABASE_PATH=/data/recipe_index.db
      - RECIPES_PATH=/data/recipes
      - LOG_LEVEL=INFO
      - MAX_RECIPE_SIZE=1048576
      - SCRAPE_TIMEOUT=30
      - PORT=8000
      # Custom logo for print watermark (optional)
      # Place your logo in ./static/logo.png and set:
      # - PRINT_LOGO_URL=/static/logo.png
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:8000/health"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 10s
    networks:
      - recipe-network

networks:
  recipe-network:
    driver: bridge

# Optional: Add volumes for explicit volume management
volumes:
  recipe-data:
    driver: local
